<!DOCTYPE HTML>
<html>
<head>
<title>1. 实现伸缩二级菜单</title>
<meta charset="utf-8" />
<link rel="stylesheet" href="css/1.css" />

</head>
<body>
	<ul class="tree">
		<li>
			<span class="open">考勤管理</span>
			<ul>
				<li>日常考勤</li>
				<li>请假申请</li>
				<li>加班/出差</li>
			</ul>
		</li>
		<li><span>信息中心</span>
			<ul>
				<li>通知公告</li>
				<li>公司新闻</li>
				<li>规章制度</li>
			</ul>
		</li>
		<li><span>协同办公</span>
			<ul>
				<li>公文流转</li>
				<li>文件中心</li>
				<li>内部邮件</li>
				<li>即时通信</li>
				<li>短信提醒</li>
			</ul>
		</li>
	</ul>
<script>
//DOM 4步:
//1. 查找触发事件的元素
//2. 绑定事件处理函数
	//3. 查找要修改的元素
	//4. 修改元素

//1. 查找触发事件的元素： 
//查找class为tree的ul内的所有span
var spans=document.querySelectorAll(
	"ul.tree>li>span"
);
//2. 绑定事件处理函数
//遍历spans中每个span，为每个span绑定单击事件处理函数
for(var span of spans){
	span.onclick=function(){
		//3. 查找要修改的元素
		//获得当前span
		var span=this;
		//获得ul.tree下开着的span
		var openSpan=document.querySelector(
			"ul.tree>li>span.open"
		);
		//4. 修改元素
		//如果当前span是开着的
		if(span.className=="open"){
			//只关闭当前span即可
			span.className="";
		}else{//否则(如果当前span是关着的)
			//如果找到了openSpan
			if(openSpan!=null){
				//就先关闭openSpan
				openSpan.className="";
			}
			//最后，无论是否别人开着，都要把自己打开！
			span.className="open";
		}
	}
}
</script>
</body>
</html>
